# Домашнее задание

## Описание
Все задания выполняются по модели данных из лекции

![db_scheme.png](pictures/db_scheme.png)
Ответ к каждому заданию ожидается из 3 пунктов:

1. Привести список новых сущностей, которые необходимо создать
2. Для каждой новой сущности проделать алгоритм, по которому необходимо её создать
   1.  Указать список сущностей, которые необходимо использовать, чтобы получить новую сущность
   2. Указать с помощью каких атрибутов связать сущности
   3. Указать на какие атрибуты наложить фильтрации и какие это фильтрации должны быть
   4. Указать состав новой сущности: название, атрибуты, первичный ключ
3. Привести описание, как с помощью полученной итоговой сущности решить указанное задание

**Ограничение: каждая новая сущность должна быть получена не более чем из двух других**

**Ответ для примера из лекции может выглядеть следующим образом:**
1. "Легенды партнера Х", "Квесты партнера Х", "Игры партнера Х", "Игры партнера X за 2023 год", "Первая заявка на игру партнера Х", "Первая игра клиента у партнера Х", "Игры партнера за 2023 с флагом новой игры"
2. Получение новых сущностей:
   1. Легенды партнера Х
      1. Для получения используются: partner, legend
      2. Связь сущностей: legend.partner_rk -> partner.partner_rk
      3. Фильтрации: partner.partner_rk = X
      4. Новая сущность legend_of_partner_x, атрибуты: legend_rk из legend.legend_rk. Первичный ключ - legend_rk
   2. Квесты партнера Х
      1. Для получения используются: quest, legend_of_partner_x
      2. Связь сущностей: quest.legend_rk -> legend_of_partner_x.legend_rk
      3. Фильтрации: не нужны
      4. Новая сущность quest_of_partner_x, атрибуты: quest_rk из quest.quest_rk. Первичный ключ - quest_rk
   3. Игры партнера Х
      1. .... (по аналогии с прошлыми примерами)
   4. Игры партнера X за 2023 год
      1. .... (по аналогии с прошлыми примерами)
   5. Первая заявка на игру партнера Х
      1. .... (по аналогии с прошлой сущностью)
   6. Первая игра партнера у клиента
      1. ..... (по аналогии с прошлыми примерами)
   7. Игры партнера за 2023 с флагом новой игры
      1. ..... (по аналогии с прошлыми примерами)
      2. Новая сущность game_of_partner_x_2023_with_new_flg. Атрибуты: game_rk из game_of_partner_x_2023, is_new_client_for_partner (1 если есть запись в first_game_of_client_for_partner_x по совпадению game_rk, иначе 0). Первичный ключ - game_rk
3. Среднее по game_of_partner_x_2023_with_new_flg.is_new_client_for_partner будет означать долю новых клиентов


## ДЗ 1
**Задание.** Посчитайте количество игр, которые были проведены сотрудниками с фамилией X в 2023 году.

**Подсказка:** В итоговой сущности ожидаются атрибут, идентифицирующий сотрудника, и количество проведенным их игр.




